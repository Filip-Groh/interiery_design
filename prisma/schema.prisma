// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:database.db"
}

// Update formatting run: npx prisma format
// Update SQLite run: npx prisma migrate dev
// Update JS mapping run: npx prisma generate

// Interiery design

model Designer {
  id         Int      @id @default(autoincrement())
  createDate DateTime @default(now())
  updateDate DateTime @updatedAt

  name  String
  role  String
  email String
  mobil String
}

model Realization {
  id         Int      @id @default(autoincrement())
  createDate DateTime @default(now())
  updateDate DateTime @updatedAt

  title    String
  comments Comment[]
  tags     Tag[]

  task    String
  design  Design[]
  preview Preview[]
}

model Article {
  id         Int      @id @default(autoincrement())
  createDate DateTime @default(now())
  updateDate DateTime @updatedAt

  title String
  tags  Tag[]

  text     String
  images   Image[]
  comments Comment[]
}

model Comment {
  id         Int      @id @default(autoincrement())
  createDate DateTime @default(now())
  updateDate DateTime @updatedAt

  title         String
  text          String
  likes         Int
  user          User         @relation(fields: [userId], references: [id])
  userId        Int
  realization   Realization? @relation(fields: [realizationId], references: [id])
  realizationId Int?
  article       Article?     @relation(fields: [articleId], references: [id])
  articleId     Int?
}

model User {
  id         Int      @id @default(autoincrement())
  createDate DateTime @default(now())
  updateDate DateTime @updatedAt

  name    String
  profile Image?
  comment Comment[]
}

model Tag {
  id         Int      @id @default(autoincrement())
  createDate DateTime @default(now())
  updateDate DateTime @updatedAt

  name          String       @unique
  realization   Realization? @relation(fields: [realizationId], references: [id])
  realizationId Int?
  article       Article?     @relation(fields: [articleId], references: [id])
  articleId     Int?
}

model Design {
  id         Int      @id @default(autoincrement())
  createDate DateTime @default(now())
  updateDate DateTime @updatedAt

  title         String
  description   String
  images        Image[]
  realization   Realization? @relation(fields: [realizationId], references: [id])
  realizationId Int?
}

model Preview {
  id         Int      @id @default(autoincrement())
  createDate DateTime @default(now())
  updateDate DateTime @updatedAt

  title         String
  images        Image[]
  realization   Realization? @relation(fields: [realizationId], references: [id])
  realizationId Int?
}

model Image {
  id         Int      @id @default(autoincrement())
  createDate DateTime @default(now())
  updateDate DateTime @updatedAt

  path        String
  description String

  article   Article? @relation(fields: [articleId], references: [id])
  articleId Int?
  user      User?    @relation(fields: [userId], references: [id])
  userId    Int?     @unique
  design    Design?  @relation(fields: [designId], references: [id])
  designId  Int?
  preview   Preview? @relation(fields: [previewId], references: [id])
  previewId Int?
}
